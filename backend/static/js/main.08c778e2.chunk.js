(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var o=t(16),c=t.n(o),a=t(3),r=t(2),i=t(0),u=function(e){var n=e.persons,t=e.keyword,o=e.deletion;return Object(i.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(i.jsxs)("li",{style:{listStyle:"none"},children:[e.name," ",e.number,Object(i.jsx)("button",{onClick:function(){return o(e.id)},children:"delete"})]},e.id)}))})},s=function(e){var n=e.handleTextChange;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{onChange:n})]})},l=function(e){var n=e.addName,t=e.handleNumberChange,o=e.handleNoteChange,c=e.newName,a=e.newNumber;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:o,value:c})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:t,value:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},d=t(4),j=t.n(d),h="/api/persons",b=function(){return j.a.get(h).then((function(e){return e.data}))},f=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},m=function(e){return j.a.post(h,e)},O=function(e,n){console.log(e);var t=j.a.put("".concat(h,"/").concat(e),n);return console.log(t.then),t.then((function(e){return e.data}))},v=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),d=Object(a.a)(c,2),j=d[0],h=d[1],v=Object(r.useState)(""),g=Object(a.a)(v,2),p=g[0],x=g[1],w=Object(r.useState)(""),C=Object(a.a)(w,2),N=C[0],k=C[1],y=Object(r.useState)(""),S=Object(a.a)(y,2),T=S[0],L=S[1],A=Object(r.useState)(""),D=Object(a.a)(A,2),E=D[0],I=D[1],J=function(e){var n=e.person;return""===n?null:Object(i.jsxs)("div",{className:"success",children:["Added ",n]})},B=function(e){var n=e.person;return""===n?null:t.includes(n)?Object(i.jsxs)("div",{className:"failure",children:["Information of ",n," has already been removed from the server"]}):Object(i.jsx)("div",{className:"failure",children:n})};Object(r.useEffect)((function(){b().then((function(e){o(e)})).catch((function(e){console.log(E+"poistettu jo")}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(J,{person:T}),Object(i.jsx)(B,{person:E}),Object(i.jsx)(s,{handleTextChange:function(e){k(e.target.value)}}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(l,{addName:function(e){e.preventDefault();var n={name:j,number:p};if(t.some((function(e){return e.name.toLowerCase()===j.toLowerCase()}))){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===j})).id;console.log(c),O(c,n).then((function(e){console.log(e),o(t.map((function(n){return n.name===e.name?e:n})))})).catch((function(e){console.log(e),I(n.name),setTimeout((function(){I("")}),1e4)}))}}else m(n).then((function(e){console.log(e.data),o(t.concat(e.data)),h(""),x(""),L(e.data.name),setTimeout((function(){L("")}),1e4)})).catch((function(e){console.log(e),I(e.response.data),setTimeout((function(){I("")}),15e3)}))},handleNumberChange:function(e){console.log(e.target.value),x(e.target.value)},handleNoteChange:function(e){console.log(e.target.value),h(e.target.value)},newName:j,newNumber:p}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(u,{persons:t,keyword:N,deletion:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&(console.log("".concat(e," deleted")),f(e).then((function(n){o(t.filter((function(n){return n.id!==e})))})).catch((function(e){console.log(e)})))}})]})};t(40);c.a.render(Object(i.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.08c778e2.chunk.js.map