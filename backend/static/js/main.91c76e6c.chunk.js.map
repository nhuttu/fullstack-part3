{"version":3,"sources":["components/Persons.js","components/Filterbar.js","components/PersonForm.js","services/backend.js","App.js","index.js"],"names":["Persons","persons","keyword","deletion","filter","p","name","toLowerCase","includes","map","style","listStyle","number","onClick","id","Filterbar","handleTextChange","onChange","PersonForm","addName","handleNumberChange","handleNoteChange","newName","newNumber","onSubmit","value","type","baseURL","axios","get","then","response","data","delete","newPerson","post","console","log","put","answ","App","useState","setPersons","setNewName","setNewNumber","newSearch","setNewSearch","successMessage","setsuccessMessage","latestDelete","setlatestDelete","Success","person","className","Failure","useEffect","backend","info","catch","error","event","target","preventDefault","some","window","confirm","who","find","r","setTimeout","concat","reactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.91c76e6c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({ persons, keyword, deletion}) => {\r\n\r\n    return (\r\n        <div>\r\n            {persons.filter(p => p.name.toLowerCase().includes(keyword.toLowerCase()))\r\n                .map(p => (\r\n                    <li style={{ listStyle: 'none' }} key={p.id}>\r\n                        {p.name} {p.number}\r\n                    <button onClick={() => deletion(p.id)}>delete</button>\r\n                    </li>\r\n                ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\nconst Filterbar = ({ handleTextChange }) => {\r\n    return (\r\n        <div>\r\n            filter shown with <input onChange={handleTextChange} />\r\n        </div>\r\n    )\r\n}\r\nexport default Filterbar","import React from 'react'\r\n\r\nconst PersonForm = ({ addName, handleNumberChange, handleNoteChange, newName, newNumber }) => {\r\n    return (\r\n        <div>\r\n\r\n            <form onSubmit={addName}>\r\n                <div>\r\n                    name: <input onChange={handleNoteChange} value={newName} />\r\n                </div>\r\n                <div>\r\n                    number: <input onChange={handleNumberChange} value={newNumber} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseURL = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseURL).then(response => response.data)\r\n} \r\n\r\nconst deletion = id => {\r\n    const request = axios.delete(`${baseURL}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newPerson => {\r\n    return axios.post(baseURL, newPerson)\r\n}\r\n\r\nconst replace = (id, newPerson) => {\r\n    console.log(id)\r\n    const response = axios.put(`${baseURL}/${id}`, newPerson)\r\n    console.log(response.then)\r\n    return response.then(answ => answ.data)\r\n}\r\n\r\nexport default {getAll, deletion, create, replace}","import React, { useState, useEffect } from 'react'\r\nimport Persons from './components/Persons'\r\nimport Filterbar from './components/Filterbar'\r\nimport PersonForm from './components/PersonForm'\r\nimport backend from './services/backend'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [newSearch, setNewSearch] = useState('')\r\n  const [successMessage, setsuccessMessage] = useState('')\r\n  const [latestDelete, setlatestDelete] = useState('')\r\n\r\n  const Success = ({ person }) => {\r\n    if (person === '') {\r\n      return null\r\n    }\r\n    \r\n    return (\r\n      <div className='success'>\r\n        Added {person}\r\n      </div>\r\n    )\r\n  }\r\n  const Failure = ({ person }) => {\r\n    if (person === '') {\r\n      return null\r\n    }\r\n    if (!persons.includes(person)) {\r\n      return (\r\n        <div className='failure'>\r\n          {person}\r\n        </div>\r\n      )\r\n    }\r\n    return (\r\n      <div className='failure'>\r\n        Information of {person} has already been removed from the server\r\n      </div>\r\n    )\r\n  }\r\n  useEffect(() => {\r\n    backend\r\n      .getAll()\r\n      .then(info => {\r\n        setPersons(info)\r\n      })\r\n      .catch(error => {\r\n        console.log(latestDelete + 'poistettu jo')\r\n      })\r\n  }, [])\r\n\r\n  const handleTextChange = (event) => {\r\n    setNewSearch(event.target.value)\r\n  }\r\n\r\n  const handleNoteChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const deletion = id => {\r\n    const who = persons.find(p => p.id === id)\r\n    if (window.confirm(`Delete ${who.name} ?`)) {\r\n      console.log(`${id} deleted`)\r\n      backend.\r\n        deletion(id)\r\n        .then(r => {\r\n          setPersons(persons.filter(p => p.id !== id))\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        }\r\n        )\r\n    }\r\n  }\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    if (persons.some(p => p.name.toLowerCase() === newName.toLowerCase())) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const who = persons.find(p => p.name === newName).id\r\n        console.log(who)\r\n        backend.\r\n          replace(who, newPerson)\r\n          .then(r => {\r\n            console.log(r)\r\n            setPersons(persons.map(p => p.name === r.name ? r : p))\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            setlatestDelete(newPerson.name)\r\n            setTimeout(() => {\r\n              setlatestDelete('')\r\n            }, 10000)\r\n          })\r\n      }\r\n    }\r\n    else {\r\n\r\n      backend.\r\n        create(newPerson)\r\n        .then(r => {\r\n          console.log(r.data)\r\n          setPersons(persons.concat(r.data))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setsuccessMessage(r.data.name)\r\n          setTimeout(() => {\r\n            setsuccessMessage('')\r\n          }, 10000)\r\n\r\n\r\n        }\r\n        )\r\n        .catch(error => {\r\n          console.log(error)\r\n          setlatestDelete(error.response.data)\r\n          setTimeout(() => {\r\n            setlatestDelete('')\r\n          }, 15000);\r\n        })\r\n\r\n\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Success person={successMessage} />\r\n      <Failure person={latestDelete} />\r\n      <Filterbar handleTextChange={handleTextChange} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm addName={addName} handleNumberChange={handleNumberChange} handleNoteChange={handleNoteChange} newName={newName} newNumber={newNumber} />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} keyword={newSearch} deletion={deletion} />\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default App","import reactDom from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nreactDom.render(<App />, document.getElementById('root'))"],"sourceRoot":""}